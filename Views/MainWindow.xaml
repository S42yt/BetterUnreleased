<Window x:Class="BetterUnreleased.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:BetterUnreleased"
        xmlns:models="clr-namespace:BetterUnreleased.Models"
        Title="Music Player" Height="600" Width="800">
  <Window.Resources>
    <local:NullToVisibilityConverter x:Key="NullToVisibilityConverter"/>
    <local:SecondsToMinuteConverter x:Key="SecondsToMinuteConverter"/>
  </Window.Resources>
  <Grid>
    <Grid.RowDefinitions>
      <RowDefinition Height="*"/>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="100"/>
    </Grid.RowDefinitions>

    <!-- ListView for Songs -->
    <ListView x:Name="SongList" Grid.Row="0" AllowDrop="True">
      <ListView.ItemTemplate>
        <DataTemplate DataType="{x:Type models:Song}">
          <Border BorderThickness="1" BorderBrush="Gray" Margin="3" Padding="5">
            <DockPanel>
              <Image Width="60" Height="60" Margin="0,0,10,0"
                     Source="{Binding ThumbnailPath}"
                     Visibility="{Binding ThumbnailPath, Converter={StaticResource NullToVisibilityConverter}}"
                     DockPanel.Dock="Left"/>
              <StackPanel VerticalAlignment="Center">
                <TextBlock Text="{Binding Title}" FontSize="16" FontWeight="Bold"/>
                <TextBlock Text="{Binding Artist}" FontSize="14"/>
                <TextBlock Text="{Binding Duration, Converter={StaticResource SecondsToMinuteConverter}}" FontSize="12" Foreground="Gray"/>
              </StackPanel>
              <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" DockPanel.Dock="Right">
                <Button Content="✎" Margin="5,0" Click="EditSong_Click" ToolTip="Edit"/>
                <Button Content="🗑" Margin="5,0" Click="DeleteSong_Click" ToolTip="Delete"/>
              </StackPanel>
            </DockPanel>
          </Border>
        </DataTemplate>
      </ListView.ItemTemplate>
    </ListView>

    <TextBlock x:Name="CurrentSongTitle" Grid.Row="1" Margin="10" FontSize="16" FontWeight="Bold" HorizontalAlignment="Center"/>

    <Slider x:Name="ProgressSlider" Grid.Row="2" Margin="10,10,10,0" Minimum="0" Maximum="100" ValueChanged="ProgressSlider_ValueChanged"/>

    <TextBlock x:Name="CurrentTime" Grid.Row="3" Margin="10,0,10,10" FontSize="12" HorizontalAlignment="Center"/>

    <StackPanel Grid.Row="4" Orientation="Horizontal" HorizontalAlignment="Center" Margin="10">
      <Button x:Name="BackButton" Content="⏮" FontSize="20" Width="50" Margin="5,0" Click="BackButton_Click" ToolTip="Previous"/>
      <Button x:Name="TogglePlayPauseButton" Content="▶" FontSize="20" Width="50" Margin="5,0" Click="TogglePlayPause_Click" ToolTip="Play/Pause"/>
      <Button x:Name="SkipButton" Content="⏭" FontSize="20" Width="50" Margin="5,0" Click="SkipButton_Click" ToolTip="Next"/>
      <Button x:Name="RepeatButton" Content="🔁" FontSize="20" Width="50" Margin="5,0" Click="RepeatButton_Click" ToolTip="Repeat Off"/>
      <Button x:Name="AddMusicButton" Content="+" FontSize="20" Width="50" Margin="5,0" Click="AddMusicButton_Click" ToolTip="Add Music"/>
    </StackPanel>
  </Grid>
</Window>